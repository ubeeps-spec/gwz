<!doctype html>
<html lang="{{ LANGUAGE_CODE|default:'zh-hant' }}">
<head>
    <meta charset="utf-8">
    <title>{% trans "Invoice" %} #{{ order.id }}</title>
    {% load i18n %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f5f5f5; padding: 20px; }
        .invoice-box {
            max-width: 800px;
            margin: auto;
            padding: 30px;
            border: 1px solid #eee;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
            font-size: 16px;
            line-height: 24px;
            background: #fff;
            color: #555;
        }
        .invoice-header { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .invoice-title { font-size: 32px; color: #333; font-weight: bold; }
        .invoice-details { text-align: right; }
        .invoice-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .invoice-table th { background: #eee; text-align: left; padding: 10px; }
        .invoice-table td { padding: 10px; border-bottom: 1px solid #eee; }
        .total-row td { font-weight: bold; border-top: 2px solid #333; }
        @media print {
            body { background: #fff; }
            .invoice-box { box-shadow: none; border: 0; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>

<div class="invoice-box">
    <div class="invoice-header">
        <div>
            <div class="invoice-title">{% trans "INVOICE" %}</div>
            <div>{{ site_settings.site_name }}</div>
            <div>{{ site_settings.contact_address }}</div>
            <div>{% trans "Tel" %}: {{ site_settings.contact_phone }}</div>
            <div>{% trans "Email" %}: {{ site_settings.contact_email }}</div>
        </div>
        <div class="invoice-details">
            <div><strong>{% trans "Order #" %}:</strong> {{ order.order_number|default:order.id }}</div>
            <div><strong>{% trans "Date" %}:</strong> {{ order.created_at|date:"Y-m-d H:i" }}</div>
            <div><strong>{% trans "Status" %}:</strong> {{ order.get_status_display }}</div>
        </div>
    </div>

    <hr>

    <div class="row mb-4">
        <div class="col-6">
            <h5>{% trans "Bill To" %}:</h5>
            <div>{{ order.customer_name }}</div>
            <div>{{ order.address }}</div>
            <div>{{ order.email }}</div>
            <div>{{ order.phone }}</div>
        </div>
    </div>

    <table class="invoice-table">
        <thead>
            <tr>
                <th>{% trans "Item" %}</th>
                <th class="text-end">{% trans "Unit Cost" %}</th>
                <th class="text-end">{% trans "Qty" %}</th>
                <th class="text-end">{% trans "Total" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order.items.all %}
            <tr>
                <td>{{ item.product.name }}</td>
                <td class="text-end">HK${{ item.unit_price }}</td>
                <td class="text-end">{{ item.quantity }}</td>
                <td class="text-end">HK${{ item.subtotal }}</td>
            </tr>
            {% endfor %}
            <tr class="total-row">
                <td colspan="3" class="text-end">{% trans "Total" %}:</td>
                <td class="text-end">HK${{ order.total_amount }}</td>
            </tr>
        </tbody>
    </table>

    <div class="mt-5 text-center no-print">
        <button onclick="window.print()" class="btn btn-primary">{% trans "Print Invoice" %}</button>
        <a href="javascript:history.back()" class="btn btn-secondary ms-2">{% trans "Back" %}</a>
    </div>
</div>

</body>
</html>
